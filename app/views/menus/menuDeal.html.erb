<% if current_employee%>
  <%= render 'employee/navigation' %>
  <div class="sb-nav-fixed">
        <div id="layoutSidenav">
          <%= render 'employee/sidenav' %>
          <div id="layoutSidenav_content">
            <main>
              <%= render 'employee/card'%>
              <div class="container-fluid px-4">
                <div class="container-fluid px-4">
                  <h1 class="mt-4">Restaurant Deals</h1>
                  <div class="card mb-4">
                  </div>
                  <div class="card mb-4">
                    <div class="card-header">
                      <i class="fas fa-table me-1"></i>
                      Deals
                      <%= button_to "Add New Deal", deals_new_path, :method => :get, class:"rightButton" %>
                    </div>
                    <div class="card-body">
                      <table id="datatablesSimple">
                        <thead>
                          <tr>
                            <th>ID</th>
                            <th>Name</th>
                            <th>Description</th>
                            <th>Price</th>
                            <th>Deal Group Item</th>
                            <th>Deal Food Item</th>
                            <th>Actions</th>
                          </tr>
                        </thead>
                        <tbody>
                            <% @menu.menu_items.each do |menu_items| %>
                              <% if menu_items.MenuItemable_type == "Deal" %>
                                  <tr>
                                    <td class="counterCell"></td>
                                    <td><%= menu_items.MenuItemable.deal_name %></td>
                                    <td><%= menu_items.MenuItemable.deal_description %></td>
                                    <td><%= menu_items.MenuItemable.deal_price %></td>
                                    <td>
                                      <% menu_items.MenuItemable.deal_items.each do |d| %>
                                        <% if d.DealItemable_type == "GroupItem" %>
                                          <%= d.DealItemable.groupItem_name %>,
                                        <% end %>
                                      <% end %>
                                    </td>
                                    <td>
                                      <% menu_items.MenuItemable.deal_items.each do |d| %>
                                        <% if d.DealItemable_type == "FoodItem" %>
                                          <%= d.DealItemable.item_name %>,
                                        <% end %>
                                      <% end %>
                                    </td>
                                    <td><%= button_to "Remove", :method => :delete, data: { confirm: 'Are you sure?' } %></td>
                                  </tr>
                              <% end %>
                            <% end %>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
              </div>
            </main>
          </div>
        </div>
  </div>
<% end %>
